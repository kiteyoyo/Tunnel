function [O B C]=reg(I,is_N)
I=repair(I);
if is_N
    s=[1,14,39];
    e=[10,36,76];
else
    s=[1,12,37];
    e=[8,32,74];%need see need of paint2
end
O=[];
time=I(1,:);
t0=time(1);
I(1, :)=[];
time=(time-t0)*24*60;
if is_N
    location=[0.178000000000000,0.706000000000000,1.06800000000000,1.43500000000000,1.78800000000000,2.06800000000000,2.45500000000000,2.84900000000000,3.19800000000000,4.04400000000000,4.05800000000000,4.40000000000000,4.45500000000000,4.46000000000000,5.52300000000000,5.88300000000000,6.41300000000000,7.11300000000000,7.63600000000000,8.04300000000000,8.70300000000000,9.01300000000000,9.37300000000000,9.84000000000000,10.1470000000000,10.5060000000000,10.8660000000000,11.1780000000000,11.5550000000000,11.8960000000000,12.2380000000000,12.5790000000000,12.9220000000000,13.3480000000000,13.7630000000000,14.5500000000000,14.5830000000000,14.6830000000000,14.8000000000000,15.4880000000000,15.8550000000000,16.1960000000000,16.5700000000000,16.9000000000000,17.2680000000000,17.6080000000000,17.9980000000000,18.3130000000000,18.6620000000000,19.0120000000000,19.3610000000000,19.6890000000000,20.0620000000000,20.4120000000000,20.7520000000000,21.0550000000000,21.4440000000000,21.8080000000000,22.1580000000000,22.5100000000000,22.8590000000000,23.2090000000000,23.5680000000000,23.9110000000000,24.2640000000000,24.6770000000000,24.9520000000000,25.3100000000000,25.6520000000000,26.0070000000000,26.3000000000000,26.7050000000000,27.0560000000000,27.4680000000000,27.7790000000000,28.4200000000000,29.8430000000000,30.1000000000000]';
else
    location=[1.07200000000000,1.42400000000000,1.76600000000000,2.05000000000000,2.43300000000000,2.83500000000000,3.17800000000000,3.50600000000000,3.80600000000000,4.01600000000000,4.17800000000000,4.39500000000000,4.74900000000000,5.52300000000000,6.49800000000000,7.11300000000000,7.55300000000000,7.92300000000000,8.66900000000000,9.06300000000000,9.32600000000000,9.84000000000000,10.1450000000000,10.4950000000000,10.8450000000000,11.1580000000000,11.5450000000000,11.8950000000000,12.2450000000000,12.5950000000000,12.9450000000000,13.3430000000000,14.3560000000000,14.4830000000000,14.5400000000000,14.6910000000000,15.1390000000000,15.4780000000000,15.8560000000000,16.2010000000000,16.5510000000000,16.9020000000000,17.2530000000000,17.6080000000000,17.9900000000000,18.3120000000000,18.6630000000000,19.0130000000000,19.3630000000000,19.6770000000000,20.0630000000000,20.4130000000000,20.7630000000000,21.0630000000000,21.4600000000000,21.8070000000000,22.1590000000000,22.5060000000000,22.8590000000000,23.2070000000000,23.5600000000000,23.9100000000000,24.2640000000000,24.6780000000000,24.9620000000000,25.3120000000000,25.6640000000000,26.0130000000000,26.2990000000000,26.7060000000000,27.0540000000000,27.4420000000000,27.7480000000000,28.2360000000000,29.7160000000000,30.1400000000000,30.2490000000000,30.2660000000000]';
end
for i=1:3
    loc=location(s(i):e(i));
    A=I(s(i):e(i), :);
    [s1 s2]=size(A);
    C=[];
    B=[];
    for i=1:s2
        C=[C;A(:, i)];
        b=[loc ones(s1, 1)*time(i) ones(s1, 1)];
        B=[B;b];
    end
    O=[O B\C];
end
if is_N
    O=O*[0 0 1;0 1 0;1 0 0];
end
